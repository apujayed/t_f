(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[13],{144:function(e,t,a){"use strict";a.r(t);var r=a(0),l=a(4),c=(a(9),a(106),a(2)),n=a.n(c),s=a(6),o=a(5),i=a(92),u=a(7),b=a(17),g=a(36),j=a.n(g),d=(a(107),a(108)),O=a(18),v=a(1),m=function(){var e=Object(b.c)((function(e){return e.catalogue})),t=e.factory_list,a=e.edit,l=e.catalogue_data,c=e.rating_list,g=localStorage.getItem("users"),m=JSON.parse(g),p=Object(r.useState)([]),h=Object(u.a)(p,2),f=(h[0],h[1],Object(b.b)()),C=Object(r.useState)({}),x=Object(u.a)(C,2),_=x[0],y=x[1],S=function(){var e={};return N.lot||(e.lot="Lot is required."),N.invoice||(e.invoice="Invoice is required."),N.factory||(e.factory="Factory is required."),N.grade||(e.grade="Grade is required."),N.net_weight||(e.net_weight="Weight is required."),N.price||(e.price="Rate is required."),N.pkgs||(e.pkgs="Pkgs is required."),N.totalkg||(e.totalkg="Total is required."),N.warehouse||(e.warehouse="Warehouse is required."),N.category||(e.category="Category is required."),N.sale_no||(e.sale_no="Sale No is required."),N.sample_c||(e.sample_c="Sample is required."),N.gross_total||(e.gross_total="Gross Total is required."),N.lrating||(e.lrating="leaf rating is required."),N.lirating||(e.lirating="liqour rating is required."),N.gross_bag||(e.gross_bag="liqour rating is required."),e},F=Object(r.useState)({lot:"",invoice:"",factory:"",grade:"",net_weight:"",gross_bag:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:m.link_id,warehouse:"",lrating:"",lirating:"",category:"",sale_no:"",posted:m.username}),k=Object(u.a)(F,2),N=k[0],w=k[1],D=function(e){var t=e.target.name,a=e.target.value;"pkgs"===t?(w((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t,a))})),T(a)):"sample_c"===t?(w((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t,a))})),P(a)):w((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},t,a))}))},P=function(e){console.log("888");var t=parseFloat(N.sample_c),a=parseFloat(N.gross_total)-t;w((function(e){return Object(i.a)(Object(i.a)({},e),{},{gross_total:a})}))},T=function(e){var t,a=parseFloat(N.net_weight),r=isNaN(a)?0:a*e;t="LEAF"===N.category?1.5:"DUST"===N.category?.8:.5;var l=r-t;console.log(t),w((function(e){return Object(i.a)(Object(i.a)({},e),{},{totalkg:r,sample_c:t,gross_total:l})}))},E=t.filter((function(e){return"WAREHOUSE"===e.type})),q=t.filter((function(e){return"FACTORY"===e.type})),G=c.filter((function(e){return"LEAF"===e.type})),A=c.filter((function(e){return"LIQUOR"===e.type})),R=function(){var e=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=S(),!(Object.keys(a).length>0)){e.next=4;break}return y(a),e.abrupt("return");case 4:return t.preventDefault(),e.next=7,f(Object(O.h)(N));case 7:w({lot:"",invoice:"",factory:"",grade:"",net_weight:"",gross_bag:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:m.link_id,warehouse:"",lrating:"",lirating:"",category:"",sale_no:"",posted:m.username}),f(Object(O.c)()),j()({title:"Success",text:"Catalogue created successfully!!",icon:"success",timer:2500,button:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){f(Object(O.d)()),f(Object(O.e)())}),[f]),Object(r.useEffect)((function(){a&&(console.log(l[0]),w(l[0]))}),[a]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("section",{className:"col-lg-7 connectedSortable",children:Object(v.jsx)("div",{className:"box box-danger",children:Object(v.jsxs)("div",{className:"tab-content no-padding",children:[Object(v.jsx)("div",{className:"box-header header-custom",children:Object(v.jsx)("h3",{className:"box-title",children:"Catalogue Info"})}),Object(v.jsx)("div",{className:"box-body form-horizontal",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)(d.a,{label:"Sale No",name:"sale_no",value:N.sale_no,type:"text",onChange:D,error:_.sale_no}),Object(v.jsx)(d.a,{label:"Lot",name:"lot",value:N.lot,type:"text",onChange:D,error:_.lot}),Object(v.jsx)(d.a,{label:"Invoice",name:"invoice",value:N.invoice,type:"text",onChange:D,error:_.invoice}),Object(v.jsx)(d.a,{label:"Category",name:"category",value:N.category,type:"select",options:[{value:"DUST",label:"DUST"},{value:"LEAF",label:"LEAF"},{value:"SUPPLIMENT",label:"SUPPLIMENT"}],onChange:D,error:_.category}),Object(v.jsx)(d.a,{label:"Factory",name:"factory",value:N.factory,type:"select",options:q.map((function(e){return{value:e.id,label:e.name}})),onChange:D,error:_.factory}),Object(v.jsx)(d.a,{label:"Grade",name:"grade",value:N.grade,type:"select",options:[{value:"BOP",label:"BOP"},{value:"BOP (S) (C)",label:"BOP (S) (C)"},{value:"BOP (C)",label:"BOP (C)"},{value:"GBOP",label:"GBOP"},{value:"GBOP (S) (C)",label:"GBOP (C)"},{value:"GOF",label:"GOF"},{value:"GOF (S) (C)",label:"GOF (S) (C)"},{value:"GOF (C)",label:"GOF (C)"},{value:"OF",label:"OF"},{value:"OF (S) (C)",label:"OF (S) (C)"},{value:"OF (C)",label:"OF (C)"},{value:"FOF",label:"FOF"},{value:"FOF (S) (C)",label:"FOF (S) (C)"},{value:"FOF (C)",label:"FOF (C)"},{value:"PF",label:"PF"},{value:"PF (S) (C)",label:"PF (S) (C)"},{value:"PF (C)",label:"PF (C)"},{value:"RD",label:"RD"},{value:"RD (S) (C)",label:"RD (S) (C)"},{value:"RD (C)",label:"RD (C)"},{value:"DUST",label:"DUST"},{value:"DUST (S) (C)",label:"DUST (S) (C)"},{value:"DUST (C)",label:"DUST (C)"},{value:"CD",label:"CD"},{value:"CD (S) (C)",label:"CD (S) (C)"},{value:"CD (C)",label:"CD (C)"}],onChange:D,error:_.grade}),Object(v.jsx)(d.a,{label:"G.Weight/Bag",name:"gross_bag",value:N.gross_bag,type:"text",onChange:D,error:_.gross_bag}),Object(v.jsx)(d.a,{label:"N.Weight/Bag",name:"net_weight",value:N.net_weight,type:"text",onChange:D,error:_.net_weight}),Object(v.jsx)(d.a,{label:"Pkgs",name:"pkgs",value:N.pkgs,type:"text",onChange:D,error:_.pkgs})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)(d.a,{label:"Total Kg",name:"totalkg",value:N.totalkg,type:"text",onChange:D,error:_.totalkg}),Object(v.jsx)(d.a,{label:"Sample Collect",name:"sample_c",value:N.sample_c,type:"text",onChange:D,error:_.sample_c}),Object(v.jsx)(d.a,{label:"Total After/Collect",name:"gross_total",value:N.gross_total,type:"text",onChange:D,error:_.gross_total}),Object(v.jsx)(d.a,{label:"Offer Price",name:"price",value:N.price,type:"text",onChange:D,error:_.price}),Object(v.jsx)(d.a,{label:"Leaf Rating",name:"lrating",value:N.lrating,type:"select",options:G.map((function(e){return{value:e.id,label:e.name}})),onChange:D,error:_.lrating}),Object(v.jsx)(d.a,{label:"Liquor Rating",name:"lirating",value:N.lirating,type:"select",options:A.map((function(e){return{value:e.id,label:e.name}})),onChange:D,error:_.lirating}),Object(v.jsx)(d.a,{label:"Warehouse",name:"warehouse",value:N.warehouse,type:"select",options:E.map((function(e){return{value:e.id,label:e.name}})),onChange:D,error:_.warehouse})]})]})}),Object(v.jsxs)("div",{className:"box-footer",children:[Object(v.jsx)("button",{type:"submit",className:"btn btn-danger",children:"Cancel"}),Object(v.jsx)("input",{type:"button",name:"save",className:"btn btn-success pull-right",defaultValue:a?"Update":"Save",id:"butsave",onClick:a?function(e){var t=S();Object.keys(t).length>0?y(t):a&&(e.preventDefault(),f(Object(O.k)(N)),j()({title:"Success",text:"Catalogue updated successfully!!",icon:"success",timer:2500,button:!1}),w({lot:"",invoice:"",factory:"",grade:"",net_weight:"",gross_bag:"",sample_c:"",gross_total:"",price:"",pkgs:"",totalkg:"",brokers:m.link_id,warehouse:"",lrating:"",lirating:"",category:"",sale_no:"",posted:m.username}),f(Object(O.c)()))}:R})]})]})})})})},p=a(109),h=function(){var e=localStorage.getItem("users"),t=JSON.parse(e),a=Object(b.b)(),l=Object(b.c)((function(e){return e.catalogue})).catalogue_list,c=Object(r.useMemo)((function(){return l.filter((function(e){return e.brokers===t.link_id}))}),[l,t.link_id]),n=[{Header:"LOT",accessor:"lot"},{Header:"INVOICE",accessor:"invoice"},{Header:"FACTORY",accessor:"factory_name"},{Header:"GRADE",accessor:"grade"},{Header:"NET.W",accessor:"net_weight"},{Header:"PACKAGE",accessor:"pkgs"},{Header:"TOTAL",accessor:"totalkg"},{Header:"WAREHOUSE",accessor:"warehouse_name"},{Header:"CATEGORY",accessor:"category"},{Header:"ACTION",Cell:function(e){var t=e.row;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return a(Object(O.i)(t.original.id))},className:"btn btn-warning mr-2",children:"Edit"}),Object(v.jsx)("button",{onClick:function(){return e=t.original.id,void j()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this item!",icon:"warning",buttons:["Cancel","Delete"],dangerMode:!0}).then((function(t){t&&a(Object(O.b)(e)).then((function(){j()({title:"Success",text:"Item deleted successfully!",icon:"success",timer:2500,button:!1}),a(Object(O.c)())}))}));var e},className:"btn btn-danger mr-1",children:"Delete"})]})}}];return Object(r.useEffect)((function(){a(Object(O.c)())}),[]),Object(v.jsx)("section",{className:"col-lg-12 connectedSortable",children:Object(v.jsxs)("div",{className:"box box-primary",children:[Object(v.jsx)("div",{className:"box-header header-custom",children:Object(v.jsx)("div",{className:"row ",children:Object(v.jsx)("div",{className:"col-md-6 text-left",children:Object(v.jsx)("h3",{className:"box-title",children:"Detail Info"})})})}),Object(v.jsx)(p.a,{columns:n,data:c})]})})};t.default=function(){var e=Object(l.n)();return Object(r.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/catalogue":"/")}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("section",{className:"content",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-xs-12",children:[Object(v.jsx)(m,{}),Object(v.jsx)(h,{})]})})})})}}}]);
//# sourceMappingURL=13.4577cd34.chunk.js.map