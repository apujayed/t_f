(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[16],{138:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(6),s=n(7),i=n(0),o=n(9),u=n.n(o),l=n(99),d=n(1),b=Object(l.a)("http://localhost:3009");t.default=function(){var e=Object(i.useState)(45),t=Object(s.a)(e,1)[0],n=Object(i.useState)(null),c=Object(s.a)(n,2),o=c[0],l=c[1],h=Object(i.useState)(new Date),j=Object(s.a)(h,2),f=j[0],p=j[1],m=Object(i.useState)(t),v=Object(s.a)(m,2),O=v[0],T=v[1],g=Object(i.useState)(0),x=Object(s.a)(g,2),w=x[0],E=x[1];Object(i.useEffect)((function(){return b.on("endTimeUpdated",(function(e){console.log(e),l(new Date(e.endTime).getTime())})),function(){b.disconnect()}}),[]),Object(i.useEffect)((function(){(function(){var e=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("http://localhost:3009/api/getEndTime");case 3:t=e.sent,(n=t.data.endTime)&&l(new Date(Number(n)).getTime()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching endTime:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(i.useEffect)((function(){if(o){var e=setInterval((function(){var t=new Date;p(t);var n=Math.floor((o-t.getTime())/1e3);n<=0?(clearInterval(e),T(0)):(T(n),E(Math.ceil(n/15)))}),1e3);return function(){return clearInterval(e)}}}),[o]);var S=function(){var e=Object(a.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime()+1e3*t,e.prev=1,e.next=4,u.a.post("http://localhost:3009/api/saveEndTime",{dbSave:n});case 4:console.log("EndTime saved successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error saving endTime:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),k=Array.from({length:O},(function(e,t){return(O-t)%15||15}))[0];return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:["Time to Add (in seconds): ",t]}),Object(d.jsxs)("p",{children:["End Time: ",o?new Date(o).toLocaleTimeString():"Fetching..."]}),Object(d.jsxs)("p",{children:["Current Time: ",f.toLocaleTimeString()]}),O>=0&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["First Countdown Result: ",k]}),Object(d.jsxs)("p",{children:["Result of Remaining Seconds / 15: ",w]}),Object(d.jsx)("button",{onClick:S,children:"Save EndTime"})]}),0===O&&Object(d.jsx)("p",{children:"Countdown has reached the end time."})]})}}}]);
//# sourceMappingURL=16.2b4f4fd8.chunk.js.map