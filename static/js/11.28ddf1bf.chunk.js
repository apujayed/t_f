(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[11],{103:function(e,t,c){"use strict";var n=c(7),s=c(0);t.a=function(e){var t=Object(s.useState)(new Date),c=Object(n.a)(t,2),a=c[0],r=c[1],i=Object(s.useState)({minutes:0,seconds:0}),l=Object(n.a)(i,2),o=l[0],j=l[1],d=Object(s.useState)(0),b=Object(n.a)(d,2),u=b[0],O=b[1],h=Object(s.useState)(0),m=Object(n.a)(h,2),x=m[0],f=m[1];return Object(s.useEffect)((function(){if(e){var t=setInterval((function(){var c=new Date;r(c);var n=e-c.getTime();if(n<=0)clearInterval(t),j({minutes:0,seconds:0});else{var s=Math.floor(n/6e4),a=Math.floor(n/1e3%60);j({minutes:s,seconds:a});var i=Math.floor(n/12e4);O(i),f(Math.floor(n/1e3))}}),1e3);return function(){return clearInterval(t)}}}),[e]),{currentTime:a,remainingTime:o,formattedTime:"".concat(o.minutes,":").concat(o.seconds<10?"0":"").concat(o.seconds),currentIndex:u,totalRemainingSeconds:x}}},127:function(e,t,c){},143:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(4),a=c(9),r=c.n(a),i=c(2),l=c.n(i),o=c(6),j=c(7),d=c(17),b=c(99),u=(c(27),c(141)),O=(c(127),c(1)),h=function(e){var t=Object(n.useState)(e.filteredData),c=Object(j.a)(t,2),s=(c[0],c[1],Object(n.useState)(!1)),a=Object(j.a)(s,2),r=(a[0],a[1],Object(n.useRef)(null)),i=function(t){27===(t.charCode||t.keyCode)&&e.onClose()};return Object(n.useEffect)((function(){return document.body.addEventListener("keydown",i),function(){document.body.removeEventListener("keydown",i)}}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(u.a,{nodeRef:r,in:e.show,unmountOnExit:!0,timeout:{enter:0,exit:300},children:Object(O.jsx)("div",{className:"modal",onClick:e.onClose,ref:r,children:Object(O.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(O.jsx)("div",{className:"modal-header",children:Object(O.jsx)("h4",{className:"modal-title",children:e.title})}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsxs)("table",{className:"modaltable table-bordered",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"#"}),Object(O.jsx)("th",{scope:"col",children:"Lot"}),Object(O.jsx)("th",{scope:"col",children:"Factory"}),Object(O.jsx)("th",{scope:"col",children:"Price"}),Object(O.jsx)("th",{scope:"col",children:"Bidder"}),Object(O.jsx)("th",{scope:"col",children:"Status"}),Object(O.jsx)("th",{scope:"col",children:"Action"})]})}),Object(O.jsx)("tbody",{children:e.filteredData.map((function(t,c){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{scope:"row",children:Object(O.jsx)("h4",{children:c+1})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:t.lot})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:t.factory_name})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:t.maximum_bid})}),Object(O.jsx)("td",{children:Object(O.jsx)("h4",{children:t.buyer_name})}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{className:1===t.sold_status?"hname":(t.sold_status,"rname"),children:1===t.sold_status?"Sold":0===t.sold_status?"Unsold":"Pending"})}),Object(O.jsxs)("td",{children:[Object(O.jsx)("button",{type:"button",onClick:function(){return e.onV(t,1)},className:"btn btn-success px-3",children:Object(O.jsx)("i",{className:"fas fa-check","aria-hidden":"true"})}),Object(O.jsx)("button",{type:"button",onClick:function(){return e.onV(t,0)},className:"btn btn-danger px-3",children:Object(O.jsx)("i",{className:"fas fa-times","aria-hidden":"true"})})]})]},t.id)}))})]})}),Object(O.jsx)("div",{className:"modal-footer",children:Object(O.jsx)("button",{onClick:e.onClose,className:"btn btn-danger",children:"Close"})})]})})})})},m=c(112),x=c.n(m),f=c(45),p=function(e){e.sl;var t=e.el,c=e.users,n=e.handleSoldstatus;e.formatTime,e.time,e.index;return Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{className:"text-center",children:[t.lot,Object(O.jsx)("br",{}),t.invoice]}),Object(O.jsxs)("td",{className:"text-center",children:[t.factory_name,Object(O.jsx)("br",{}),"(",t.grade,")"]}),Object(O.jsxs)("td",{className:"text-center",children:[t.price,Object(O.jsx)("br",{}),"(".concat(t.pkgs,")")]}),Object(O.jsxs)("td",{className:"text-center",children:[Object(O.jsxs)("div",{className:"bidd_name",children:[Object(O.jsx)("p",{className:"highest",children:t.maximum_bid}),Object(O.jsxs)("span",{className:t.buyer==c.link_id?"hname":"rname",children:[t.buyer_name,"(",t.maximum_bid-t.price,")"]})]}),Object(O.jsx)("br",{})]}),Object(O.jsx)("td",{className:"text-center",children:Object(O.jsx)("div",{className:"col-md-12 d-flex justify-content-center align-items-center col-sm-12 col-xs-12",children:Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)("button",{onClick:function(){return n(t,1)},disabled:t.brokers!==c.link_id,className:1===t.sold_status?"btn-success square-circle mr-4":(t.sold_status," btn-warning square-circle mr-4"),children:Object(O.jsx)(f.b,{className:"bid"})}),Object(O.jsx)("button",{onClick:function(){return n(t,0)},disabled:t.brokers!==c.link_id,className:" btn-danger square-circle",children:Object(O.jsx)(f.c,{className:"bid"})})]})})})]})},v=c(113),N=c(103),g=b.a.connect("http://128.199.28.79:3009"),y=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],s=t[1],a="http://128.199.28.79:3009",i=(Object(d.c)((function(e){return e.auction})).auction_data,localStorage.getItem("users")),b=JSON.parse(i),u=Object(n.useState)(""),m=Object(j.a)(u,2),f=m[0],y=m[1],S=Object(n.useState)(""),k=Object(j.a)(S,2),w=(k[0],k[1]),T=Object(n.useState)(),_=Object(j.a)(T,2),C=(_[0],_[1]),E=Object(n.useState)([]),A=Object(j.a)(E,2),R=A[0],D=A[1],I=Object(n.useState)([]),F=Object(j.a)(I,2),L=(F[0],F[1]),P=Object(n.useState)(0),B=Object(j.a)(P,2),U=B[0],M=(B[1],Object(n.useState)(1)),V=Object(j.a)(M,2),q=(V[0],V[1],Object(n.useState)(0)),G=Object(j.a)(q,2),J=G[0],z=G[1],K=Object(n.useState)(!1),W=Object(j.a)(K,2),H=(W[0],W[1]),Q=Object(n.useState)(!0),Y=Object(j.a)(Q,2),X=(Y[0],Y[1]),Z=Object(n.useState)(0),$=Object(j.a)(Z,2),ee=$[0],te=($[1],Object(n.useState)(!1)),ce=Object(j.a)(te,2),ne=ce[0],se=ce[1],ae=Object(n.useState)(""),re=Object(j.a)(ae,2),ie=re[0],le=re[1],oe=Object(n.useState)(""),je=Object(j.a)(oe,2),de=je[0],be=je[1],ue=Object(n.useState)(""),Oe=Object(j.a)(ue,2),he=Oe[0],me=Oe[1],xe=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/catalougedata"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/api/getEndTime"));case 3:return t=e.sent,e.abrupt("return",t.data.endTime);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/getselectbroker"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ve=Object(v.a)("catalogData",xe,{revalidateOnFocus:!0,revalidateOnReconnect:!0}),Ne=ve.data,ge=(ve.error,Object(v.a)("endTime",fe,{revalidateOnFocus:!0,revalidateOnReconnect:!0})),ye=ge.data,Se=(ge.error,Object(v.a)("".concat(a,"/getselectbroker"),pe,{revalidateOnFocus:!0,revalidateOnReconnect:!0,onSuccess:function(e){var t=e[0],c=t.auction,n=t.current_brokers,s=t.name,a=t.id,r=t.sale_no,i=t.season,l=t.date;X(0===c),y(s),w(a),C(n),le(r),be(i),me(l)}}));Se.data,Se.error;Object(n.useEffect)((function(){Ne&&D(Ne),ye&&Ie(new Date(Number(ye)).getTime())}),[Ne,ye]);var ke=function(){var e=Object(o.a)(l.a.mark((function e(t,c){var n,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,se(!0),n=t.id,s=c,e.next=6,r.a.put("".concat(a,"/updatesold"),{id:n,status:s});case 6:return e.next=8,r.a.get("".concat(a,"/getselectbroker"));case 8:i=e.sent,g.emit("user",i.data[0].current_brokers),se(!1),g.on("users",(function(e){e.filter((function(e){return 0===e.sold_status}));D(e),L(e)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c){return e.apply(this,arguments)}}(),we=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/getselectbroker"));case 3:t=e.sent,g.emit("user",t.data[0].current_brokers),s(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Te=Object(n.useState)(""),_e=Object(j.a)(Te,2),Ce=(_e[0],_e[1],function(){var e=Object(o.a)(l.a.mark((function e(){var t,c,n,s,i,o,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(a,"/getselectbroker"));case 3:return t=e.sent,c=t.data[0],n=c.auction,s=c.current_brokers,i=c.name,o=c.id,X(0===n),e.next=8,Promise.all([y(i),w(o),C(s)]);case 8:return g.emit("user",s),j=function(e){H(e===b.link_id)},g.on("user_toggle",j),e.abrupt("return",(function(){g.disconnect()}));case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}());Object(n.useEffect)((function(){var e=!0;Ce(),g.on("checkname",(function(t){e&&y(t)})),g.on("users",(function(t){if(e){t.filter((function(e){return 0===e.sold_status}));D(t),L(t)}}));return g.on("activeUsers",(function(e){z(e)})),function(){e=!1,g.disconnect()}}),[g]);var Ee=Object(n.useState)(60),Ae=(Object(j.a)(Ee,1)[0],Object(n.useState)(null)),Re=Object(j.a)(Ae,2),De=Re[0],Ie=Re[1],Fe=Object(N.a)(De),Le=(Fe.currentTime,Fe.remainingSeconds,Fe.result,Fe.currentIndex),Pe=Fe.formattedTime;Object(n.useEffect)((function(){return g.on("endTimeUpdated",(function(e){console.log(e),Ie(new Date(e.endTime).getTime())})),function(){g.disconnect()}}),[]);var Be=Object(n.useState)(!1),Ue=Object(j.a)(Be,2),Me=Ue[0],Ve=Ue[1],qe=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ve(!0),console.log("need"+R.length),t=(new Date).getTime()+120*R.length*1e3,e.prev=3,e.next=6,r.a.post("".concat(a,"/api/saveEndTime"),{dbSave:t});case 6:console.log("EndTime saved successfully"),Object(v.b)("catalogData"),Object(v.b)("endTime"),Ve(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("Error saving endTime:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),Ge=R[Le];return Object(O.jsx)(O.Fragment,{children:f===b.name?Object(O.jsxs)(O.Fragment,{children:[ne?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"overlay",children:Object(O.jsxs)("div",{className:"spinner-container",children:[Object(O.jsx)("div",{className:"spinner"}),Object(O.jsx)("span",{children:"Verifying data..."})]})})}):"",R?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(h,{title:"Brokers Lot",onClose:function(){return s(!1)},show:c,filteredData:R,onV:ke}),Object(O.jsxs)("div",{className:"section-head sec-h",children:[Object(O.jsxs)("p",{className:"br-n",children:["=",f.toUpperCase(),"="]}),Object(O.jsxs)("div",{className:"row newc",children:[Object(O.jsxs)("div",{className:"col-7 col-md-9 card-btn leftCard",children:[Object(O.jsxs)("h2",{children:["AUCTION DATE :"," ",he||""]}),Object(O.jsxs)("p",{className:"sell-text",children:["SALE NO - #",ie||""," (CEREMONIAL SALE)"]}),Object(O.jsxs)("p",{className:"sell-text",children:["PARTICIPATE - #",J," "]}),Object(O.jsxs)("p",{className:"sell-text",children:["SEASON - #",de||""]}),Object(O.jsxs)("p",{className:"sell-text",children:["CURRENT BROKER :"," ",Object(O.jsx)("span",{className:"",children:f.toUpperCase()})," "]}),Object(O.jsx)("div",{className:" row margin-left",children:"BROKERS"===b.type?Object(O.jsx)("button",{type:"button",onClick:we,className:"col-5  buttonGroup btn btn-primary  my-btn",children:"All Lot"}):""})]}),Object(O.jsxs)("div",{className:"col-5 col-md-3 align-items-center justify-content-center mt-5 rCard",children:[Object(O.jsx)("div",{className:"bflex card-btn rightButton",children:Object(O.jsx)("div",{className:"button-row",children:Object(O.jsx)("button",{disabled:Me,type:"button",onClick:qe,className:"buttonGroup btn btn-primary my-btn",children:"START"})})}),Object(O.jsx)("div",{className:"col-12",children:Object(O.jsx)("div",{className:"card",children:Object(O.jsx)("div",{className:"row rightCard",children:Object(O.jsxs)("div",{className:" ",children:[Object(O.jsx)("div",{className:"col-md-6 count-t",children:Object(O.jsx)("h2",{className:"text-center mh2",children:Pe})}),Object(O.jsx)("div",{className:"col-md-6 name-t",children:Object(O.jsx)("h2",{className:"mh2 text-center",children:b.short_name})}),Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"col-md-12 name-t mh3",children:Object(O.jsxs)("h4",{className:" text-center fw-bold fs-4",children:["TOATL : ",R.length," LOT"]})})})]})})})})]})]})]}),Object(O.jsxs)("h2",{className:"text-center p-h",children:["-=",b.type," PANEL=- "]}),Object(O.jsx)("hr",{className:"hr-h"}),Object(O.jsxs)("div",{className:"con",children:[Object(O.jsx)("div",{className:"row g-1",children:Object(O.jsxs)("table",{id:"auction",className:"table table-bordered",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("th",{scope:"col",children:["Lot ",Object(O.jsx)("br",{}),"Invoice"]}),Object(O.jsxs)("th",{scope:"col",children:["Factory",Object(O.jsx)("br",{}),"Grade"]}),Object(O.jsxs)("th",{scope:"col",children:["Price",Object(O.jsx)("br",{}),"Qty"]}),Object(O.jsxs)("th",{scope:"col",children:["Highest",Object(O.jsx)("br",{})," Buyer"]}),Object(O.jsx)("th",{scope:"col",children:"Bid"})]})}),Object(O.jsx)("tbody",{children:Ge?Object(O.jsx)(p,{sl:U,el:Ge,users:b,handleSoldstatus:ke,formatTime:"",time:ee}):Object(O.jsx)("p",{children:"No object to show."})})]})}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("div",{className:"row",children:Array.isArray(Ge)&&Ge.map((function(e,t){return Object(O.jsx)("div",{className:"col-12 col-md-12",children:Object(O.jsx)("div",{className:"card",children:Object(O.jsx)("div",{className:1===e.sold_status?"rem-card-y":"rem-card-x",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col-8",children:[Object(O.jsx)("div",{className:"col-12",children:Object(O.jsxs)("p",{className:"rem-text",children:[e.factory_name," (",e.lot,")"]})}),Object(O.jsx)("div",{className:"col-12",children:Object(O.jsxs)("p",{className:"rem-text",children:["(",e.maximum_bid-e.price,")"]})})]}),Object(O.jsx)("div",{className:"col-4 d-flex align-items-center justify-content-center",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-6",children:Object(O.jsx)("i",{className:"bi bi-sun"})}),Object(O.jsx)("div",{className:"col-6",children:Object(O.jsx)("i",{className:"bi bi-moon"})})]})})]})})})},t++)}))})})]})]}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)(x.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(O.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"aasVerifying Data..."})]})})]}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)(x.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(O.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"You are not selected to perform..."})]})})})};t.default=function(){var e=Object(s.n)();return Object(n.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/auction":"/")}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("section",{className:"content-header"}),Object(O.jsx)("section",{className:"content",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-xs-12",children:Object(O.jsx)(y,{})})})})]})}}}]);
//# sourceMappingURL=11.28ddf1bf.chunk.js.map